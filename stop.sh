#!/bin/bash

# ðŸ›‘ Personal AI Effectiveness Assistant - Stop Script
# ÐžÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð½Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸

# Ð¦Ð²ÐµÑ‚Ð°
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m'

echo -e "${YELLOW}ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°...${NC}"

# ÐŸÐ¾Ð¸ÑÐº Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ° Next.js Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 3000
PORT=3000
PID=$(lsof -ti:$PORT)

if [ -z "$PID" ]; then
    echo -e "${YELLOW}âš ï¸  Ð¡ÐµÑ€Ð²ÐµÑ€ Ð½Ðµ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ $PORT${NC}"
    exit 0
fi

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ°
kill -9 $PID 2>/dev/null

if [ $? -eq 0 ]; then
    echo -e "${GREEN}âœ“ Ð¡ÐµÑ€Ð²ÐµÑ€ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ (PID: $PID)${NC}"
else
    echo -e "${RED}âŒ ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÐµÑ€Ð²ÐµÑ€${NC}"
    exit 1
fi

# ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð² (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)
echo -e "${YELLOW}ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²...${NC}"
rm -rf .next/cache 2>/dev/null
echo -e "${GREEN}âœ“ Ð“Ð¾Ñ‚Ð¾Ð²Ð¾${NC}"
